{"version":3,"file":"y-tiptap.cjs","sources":["../src/plugins/keys.js","../src/utils.js","../src/plugins/sync-plugin.js","../src/lib.js","../src/plugins/cursor-plugin.js","../src/plugins/undo-plugin.js"],"sourcesContent":["import { PluginKey } from 'prosemirror-state' // eslint-disable-line\n\n/**\n * The unique prosemirror plugin key for syncPlugin\n *\n * @public\n */\nexport const ySyncPluginKey = new PluginKey('y-sync')\n\n/**\n * The unique prosemirror plugin key for undoPlugin\n *\n * @public\n */\nexport const yUndoPluginKey = new PluginKey('y-undo')\n\n/**\n * The unique prosemirror plugin key for cursorPlugin\n *\n * @public\n */\nexport const yCursorPluginKey = new PluginKey('yjs-cursor')\n","import * as sha256 from 'lib0/hash/sha256'\nimport * as buf from 'lib0/buffer'\n\n/**\n * Custom function to transform sha256 hash to N byte\n *\n * @param {Uint8Array} digest\n */\nconst _convolute = digest => {\n  const N = 6\n  for (let i = N; i < digest.length; i++) {\n    digest[i % N] = digest[i % N] ^ digest[i]\n  }\n  return digest.slice(0, N)\n}\n\n/**\n * @param {any} json\n */\nexport const hashOfJSON = (json) => buf.toBase64(_convolute(sha256.digest(buf.encodeAny(json))))\n","/**\n * @module bindings/prosemirror\n */\n\nimport {createMutex} from 'lib0/mutex'\nimport * as PModel from 'prosemirror-model'\nimport {AllSelection, Plugin, TextSelection, NodeSelection} from \"prosemirror-state\"; // eslint-disable-line\nimport * as math from 'lib0/math'\nimport * as object from 'lib0/object'\nimport * as set from 'lib0/set'\nimport {simpleDiff} from 'lib0/diff'\nimport * as error from 'lib0/error'\nimport {ySyncPluginKey, yUndoPluginKey} from './keys.js'\nimport * as Y from 'yjs'\nimport {\n    absolutePositionToRelativePosition, relativePositionToAbsolutePosition\n} from '../lib.js'\nimport * as random from 'lib0/random'\nimport * as environment from 'lib0/environment'\nimport * as dom from 'lib0/dom'\nimport * as eventloop from 'lib0/eventloop'\nimport * as map from 'lib0/map'\nimport * as utils from '../utils.js'\n\n/**\n * @typedef {Object} BindingMetadata\n * @property {ProsemirrorMapping} BindingMetadata.mapping\n * @property {Map<import('prosemirror-model').MarkType, boolean>} BindingMetadata.isOMark - is overlapping mark\n */\n\n/**\n * @return BindingMetadata\n */\nexport const createEmptyMeta = () => ({\n    mapping: new Map(), isOMark: new Map()\n})\n\n/**\n * @param {Y.Item} item\n * @param {Y.Snapshot} [snapshot]\n */\nexport const isVisible = (item, snapshot) => snapshot === undefined ? !item.deleted : (snapshot.sv.has(item.id.client) && /** @type {number} */\n    (snapshot.sv.get(item.id.client)) > item.id.clock && !Y.isDeleted(snapshot.ds, item.id))\n\n/**\n * Either a node if type is YXmlElement or an Array of text nodes if YXmlText\n * @typedef {Map<Y.AbstractType<any>, PModel.Node | Array<PModel.Node>>} ProsemirrorMapping\n */\n\n/**\n * @typedef {Object} ColorDef\n * @property {string} ColorDef.light\n * @property {string} ColorDef.dark\n */\n\n/**\n * @typedef {Object} YSyncOpts\n * @property {Array<ColorDef>} [YSyncOpts.colors]\n * @property {Map<string,ColorDef>} [YSyncOpts.colorMapping]\n * @property {Y.PermanentUserData|null} [YSyncOpts.permanentUserData]\n * @property {ProsemirrorMapping} [YSyncOpts.mapping]\n * @property {function} [YSyncOpts.onFirstRender] Fired when the content from Yjs is initially rendered to ProseMirror\n */\n\n/**\n * @type {Array<ColorDef>}\n */\nconst defaultColors = [{light: '#ecd44433', dark: '#ecd444'}]\n\n/**\n * @param {Map<string,ColorDef>} colorMapping\n * @param {Array<ColorDef>} colors\n * @param {string} user\n * @return {ColorDef}\n */\nconst getUserColor = (colorMapping, colors, user) => {\n    // @todo do not hit the same color twice if possible\n    if (!colorMapping.has(user)) {\n        if (colorMapping.size < colors.length) {\n            const usedColors = set.create()\n            colorMapping.forEach((color) => usedColors.add(color))\n            colors = colors.filter((color) => !usedColors.has(color))\n        }\n        colorMapping.set(user, random.oneOf(colors))\n    }\n    return /** @type {ColorDef} */ (colorMapping.get(user))\n}\n\n/**\n * This plugin listens to changes in prosemirror view and keeps yXmlState and view in sync.\n *\n * This plugin also keeps references to the type and the shared document so other plugins can access it.\n * @param {Y.XmlFragment} yXmlFragment\n * @param {YSyncOpts} opts\n * @return {any} Returns a prosemirror plugin that binds to this type\n */\nexport const ySyncPlugin = (yXmlFragment, {\n    colors = defaultColors, colorMapping = new Map(), permanentUserData = null, onFirstRender = () => {\n    }, mapping\n} = {}) => {\n    let initialContentChanged = false\n    const binding = new ProsemirrorBinding(yXmlFragment, mapping)\n    const plugin = new Plugin({\n        props: {\n            editable: (state) => {\n                const syncState = ySyncPluginKey.getState(state)\n                return syncState.snapshot == null && syncState.prevSnapshot == null\n            }\n        }, key: ySyncPluginKey, state: {\n            /**\n             * @returns {any}\n             */\n            init: (_initargs, _state) => {\n                return {\n                    type: yXmlFragment,\n                    doc: yXmlFragment.doc,\n                    binding,\n                    snapshot: null,\n                    prevSnapshot: null,\n                    isChangeOrigin: false,\n                    isUndoRedoOperation: false,\n                    addToHistory: true,\n                    colors,\n                    colorMapping,\n                    permanentUserData\n                }\n            }, apply: (tr, pluginState) => {\n                const change = tr.getMeta(ySyncPluginKey)\n                if (change !== undefined) {\n                    pluginState = Object.assign({}, pluginState)\n                    for (const key in change) {\n                        pluginState[key] = change[key]\n                    }\n                }\n                pluginState.addToHistory = tr.getMeta('addToHistory') !== false\n                // always set isChangeOrigin. If undefined, this is not change origin.\n                pluginState.isChangeOrigin = change !== undefined && !!change.isChangeOrigin\n                pluginState.isUndoRedoOperation = change !== undefined && !!change.isChangeOrigin && !!change.isUndoRedoOperation\n                if (binding.prosemirrorView !== null) {\n                    if (change !== undefined && (change.snapshot != null || change.prevSnapshot != null)) {\n                        // snapshot changed, rerender next\n                        eventloop.timeout(0, () => {\n                            if (binding.prosemirrorView == null) {\n                                return\n                            }\n                            if (change.restore == null) {\n                                binding._renderSnapshot(change.snapshot, change.prevSnapshot, pluginState)\n                            } else {\n                                binding._renderSnapshot(change.snapshot, change.snapshot, pluginState)\n                                // reset to current prosemirror state\n                                delete pluginState.restore\n                                delete pluginState.snapshot\n                                delete pluginState.prevSnapshot\n                                binding.mux(() => {\n                                    binding._prosemirrorChanged(binding.prosemirrorView.state.doc)\n                                })\n                            }\n                        })\n                    }\n                }\n                return pluginState\n            }\n        }, view: (view) => {\n            binding.initView(view)\n            if (mapping == null) {\n                // force rerender to update the bindings mapping\n                binding._forceRerender()\n            }\n            onFirstRender()\n            return {\n                update: () => {\n                    const pluginState = plugin.getState(view.state)\n                    if (pluginState.snapshot == null && pluginState.prevSnapshot == null) {\n                        if (// If the content doesn't change initially, we don't render anything to Yjs\n                            // If the content was cleared by a user action, we want to catch the change and\n                            // represent it in Yjs\n                            initialContentChanged || view.state.doc.content.findDiffStart(view.state.doc.type.createAndFill().content) !== null) {\n                            initialContentChanged = true\n                            if (pluginState.addToHistory === false && !pluginState.isChangeOrigin) {\n                                const yUndoPluginState = yUndoPluginKey.getState(view.state)\n                                /**\n                                 * @type {Y.UndoManager}\n                                 */\n                                const um = yUndoPluginState && yUndoPluginState.undoManager\n                                if (um) {\n                                    um.stopCapturing()\n                                }\n                            }\n                            binding.mux(() => {\n                                /** @type {Y.Doc} */ (pluginState.doc).transact((tr) => {\n                                    tr.meta.set('addToHistory', pluginState.addToHistory)\n                                    binding._prosemirrorChanged(view.state.doc)\n                                }, ySyncPluginKey)\n                            })\n                        }\n                    }\n                }, destroy: () => {\n                    binding.destroy()\n                }\n            }\n        }\n    })\n    return plugin\n}\n\n/**\n * @param {import('prosemirror-state').Transaction} tr\n * @param {ReturnType<typeof getRelativeSelection>} relSel\n * @param {ProsemirrorBinding} binding\n */\nconst restoreRelativeSelection = (tr, relSel, binding) => {\n    if (relSel !== null && relSel.anchor !== null && relSel.head !== null) {\n        if (relSel.type === 'all') {\n            tr.setSelection(new AllSelection(tr.doc))\n        } else if (relSel.type === 'node') {\n            const anchor = relativePositionToAbsolutePosition(binding.doc, binding.type, relSel.anchor, binding.mapping)\n            tr.setSelection(createSafeNodeSelection(tr, anchor))\n        } else {\n            const anchor = relativePositionToAbsolutePosition(binding.doc, binding.type, relSel.anchor, binding.mapping)\n            const head = relativePositionToAbsolutePosition(binding.doc, binding.type, relSel.head, binding.mapping)\n            if (anchor !== null && head !== null) {\n                tr.setSelection(TextSelection.between(tr.doc.resolve(anchor), tr.doc.resolve(head)))\n            }\n        }\n    }\n}\n\n/**\n * @param {import('prosemirror-state').Transaction} tr\n * @param {number} pos\n * @returns {import('prosemirror-state').Selection}\n *\n * Creates a NodeSelection if the position points to a valid node, otherwise\n * creates a TextSelection near the position.\n */\nconst createSafeNodeSelection = (tr, pos) => {\n    const $pos = tr.doc.resolve(pos)\n    if ($pos.nodeAfter) {\n        return NodeSelection.create(tr.doc, pos)\n    } else {\n        return TextSelection.near($pos)\n    }\n}\n\n/**\n * @param {ProsemirrorBinding} pmbinding\n * @param {import('prosemirror-state').EditorState} state\n */\nexport const getRelativeSelection = (pmbinding, state) => ({\n    type: /** @type {any} */ (state.selection).jsonID,\n    anchor: absolutePositionToRelativePosition(state.selection.anchor, pmbinding.type, pmbinding.mapping),\n    head: absolutePositionToRelativePosition(state.selection.head, pmbinding.type, pmbinding.mapping)\n})\n\n/**\n * Binding for prosemirror.\n *\n * @protected\n */\nexport class ProsemirrorBinding {\n    /**\n     * @param {Y.XmlFragment} yXmlFragment The bind source\n     * @param {ProsemirrorMapping} mapping\n     */\n    constructor(yXmlFragment, mapping = new Map()) {\n        this.type = yXmlFragment\n        /**\n         * this will be set once the view is created\n         * @type {any}\n         */\n        this.prosemirrorView = null\n        this.mux = createMutex()\n        this.mapping = mapping\n        /**\n         * Is overlapping mark - i.e. mark does not exclude itself.\n         *\n         * @type {Map<import('prosemirror-model').MarkType, boolean>}\n         */\n        this.isOMark = new Map()\n        this._observeFunction = this._typeChanged.bind(this)\n        /**\n         * @type {Y.Doc}\n         */\n        // @ts-ignore\n        this.doc = yXmlFragment.doc\n        /**\n         * current selection as relative positions in the Yjs model\n         */\n        this.beforeTransactionSelection = null\n        this.beforeAllTransactions = () => {\n            if (this.beforeTransactionSelection === null && this.prosemirrorView != null) {\n                this.beforeTransactionSelection = getRelativeSelection(this, this.prosemirrorView.state)\n            }\n        }\n        this.afterAllTransactions = () => {\n            this.beforeTransactionSelection = null\n        }\n        this._domSelectionInView = null\n    }\n\n    /**\n     * Create a transaction for changing the prosemirror state.\n     *\n     * @returns\n     */\n    get _tr() {\n        return this.prosemirrorView.state.tr.setMeta('addToHistory', false)\n    }\n\n    _isLocalCursorInView() {\n        if (!this.prosemirrorView.hasFocus()) return false\n        if (environment.isBrowser && this._domSelectionInView === null) {\n            // Calculate the domSelectionInView and clear by next tick after all events are finished\n            eventloop.timeout(0, () => {\n                this._domSelectionInView = null\n            })\n            this._domSelectionInView = this._isDomSelectionInView()\n        }\n        return this._domSelectionInView\n    }\n\n    _isDomSelectionInView() {\n        const selection = this.prosemirrorView._root.getSelection()\n\n        if (selection == null || selection.anchorNode == null) return false\n\n        const range = this.prosemirrorView._root.createRange()\n        range.setStart(selection.anchorNode, selection.anchorOffset)\n        range.setEnd(selection.focusNode, selection.focusOffset)\n\n        // This is a workaround for an edgecase where getBoundingClientRect will\n        // return zero values if the selection is collapsed at the start of a newline\n        // see reference here: https://stackoverflow.com/a/59780954\n        const rects = range.getClientRects()\n        if (rects.length === 0) {\n            // probably buggy newline behavior, explicitly select the node contents\n            if (range.startContainer && range.collapsed) {\n                range.selectNodeContents(range.startContainer)\n            }\n        }\n\n        const bounding = range.getBoundingClientRect()\n        const documentElement = dom.doc.documentElement\n\n        return bounding.bottom >= 0 && bounding.right >= 0 && bounding.left <= (window.innerWidth || documentElement.clientWidth || 0) && bounding.top <= (window.innerHeight || documentElement.clientHeight || 0)\n    }\n\n    /**\n     * @param {Y.Snapshot} snapshot\n     * @param {Y.Snapshot} prevSnapshot\n     */\n    renderSnapshot(snapshot, prevSnapshot) {\n        if (!prevSnapshot) {\n            prevSnapshot = Y.createSnapshot(Y.createDeleteSet(), new Map())\n        }\n        this.prosemirrorView.dispatch(this._tr.setMeta(ySyncPluginKey, {snapshot, prevSnapshot}))\n    }\n\n    unrenderSnapshot() {\n        this.mapping.clear()\n        this.mux(() => {\n            const fragmentContent = this.type.toArray().map((t) => createNodeFromYElement(/** @type {Y.XmlElement} */ (t), this.prosemirrorView.state.schema, this)).filter((n) => n !== null)\n            // @ts-ignore\n            const tr = this._tr.replace(0, this.prosemirrorView.state.doc.content.size, new PModel.Slice(PModel.Fragment.from(fragmentContent), 0, 0))\n            tr.setMeta(ySyncPluginKey, {snapshot: null, prevSnapshot: null})\n            this.prosemirrorView.dispatch(tr)\n        })\n    }\n\n    _forceRerender() {\n        this.mapping.clear()\n        this.mux(() => {\n            // If this is a forced rerender, this might neither happen as a pm change nor within a Yjs\n            // transaction. Then the \"before selection\" doesn't exist. In this case, we need to create a\n            // relative position before replacing content. Fixes #126\n            const sel = this.beforeTransactionSelection !== null ? null : this.prosemirrorView.state.selection\n            const fragmentContent = this.type.toArray().map((t) => createNodeFromYElement(/** @type {Y.XmlElement} */ (t), this.prosemirrorView.state.schema, this)).filter((n) => n !== null)\n            // @ts-ignore\n            const tr = this._tr.replace(0, this.prosemirrorView.state.doc.content.size, new PModel.Slice(PModel.Fragment.from(fragmentContent), 0, 0))\n            if (sel) {\n                /**\n                 * If the Prosemirror document we just created from this.type is\n                 * smaller than the previous document, the selection might be\n                 * out of bound, which would make Prosemirror throw an error.\n                 */\n                const clampedAnchor = math.min(math.max(sel.anchor, 0), tr.doc.content.size)\n                const clampedHead = math.min(math.max(sel.head, 0), tr.doc.content.size)\n\n                tr.setSelection(TextSelection.create(tr.doc, clampedAnchor, clampedHead))\n            }\n            this.prosemirrorView.dispatch(tr.setMeta(ySyncPluginKey, {isChangeOrigin: true, binding: this}))\n        })\n    }\n\n    /**\n     * @param {Y.Snapshot|Uint8Array} snapshot\n     * @param {Y.Snapshot|Uint8Array} prevSnapshot\n     * @param {Object} pluginState\n     */\n    _renderSnapshot(snapshot, prevSnapshot, pluginState) {\n        /**\n         * The document that contains the full history of this document.\n         * @type {Y.Doc}\n         */\n        let historyDoc = this.doc\n        let historyType = this.type\n        if (!snapshot) {\n            snapshot = Y.snapshot(this.doc)\n        }\n        if (snapshot instanceof Uint8Array || prevSnapshot instanceof Uint8Array) {\n            if (!(snapshot instanceof Uint8Array) || !(prevSnapshot instanceof Uint8Array)) {\n                // expected both snapshots to be v2 updates\n                error.unexpectedCase()\n            }\n            historyDoc = new Y.Doc({gc: false})\n            Y.applyUpdateV2(historyDoc, prevSnapshot)\n            prevSnapshot = Y.snapshot(historyDoc)\n            Y.applyUpdateV2(historyDoc, snapshot)\n            snapshot = Y.snapshot(historyDoc)\n            if (historyType._item === null) {\n                /**\n                 * If is a root type, we need to find the root key in the initial document\n                 * and use it to get the history type.\n                 */\n                const rootKey = Array.from(this.doc.share.keys()).find((key) => this.doc.share.get(key) === this.type)\n                historyType = historyDoc.getXmlFragment(rootKey)\n            } else {\n                /**\n                 * If it is a sub type, we use the item id to find the history type.\n                 */\n                const historyStructs = historyDoc.store.clients.get(historyType._item.id.client) ?? []\n                const itemIndex = Y.findIndexSS(historyStructs, historyType._item.id.clock)\n                const item = /** @type {Y.Item} */ (historyStructs[itemIndex])\n                const content = /** @type {Y.ContentType} */ (item.content)\n                historyType = /** @type {Y.XmlFragment} */ (content.type)\n            }\n        }\n        // clear mapping because we are going to rerender\n        this.mapping.clear()\n        this.mux(() => {\n            historyDoc.transact((transaction) => {\n                // before rendering, we are going to sanitize ops and split deleted ops\n                // if they were deleted by seperate users.\n                /**\n                 * @type {Y.PermanentUserData}\n                 */\n                const pud = pluginState.permanentUserData\n                if (pud) {\n                    pud.dss.forEach((ds) => {\n                        Y.iterateDeletedStructs(transaction, ds, (_item) => {\n                        })\n                    })\n                }\n                /**\n                 * @param {'removed'|'added'} type\n                 * @param {Y.ID} id\n                 */\n                const computeYChange = (type, id) => {\n                    const user = type === 'added' ? pud.getUserByClientId(id.client) : pud.getUserByDeletedId(id)\n                    return {\n                        user, type, color: getUserColor(pluginState.colorMapping, pluginState.colors, user)\n                    }\n                }\n                // Create document fragment and render\n                const fragmentContent = Y.typeListToArraySnapshot(historyType, new Y.Snapshot(prevSnapshot.ds, snapshot.sv)).map((t) => {\n                    if (!t._item.deleted || isVisible(t._item, snapshot) || isVisible(t._item, prevSnapshot)) {\n                        return createNodeFromYElement(t, this.prosemirrorView.state.schema, {\n                            mapping: new Map(),\n                            isOMark: new Map()\n                        }, snapshot, prevSnapshot, computeYChange)\n                    } else {\n                        // No need to render elements that are not visible by either snapshot.\n                        // If a client adds and deletes content in the same snapshot the element is not visible by either snapshot.\n                        return null\n                    }\n                }).filter((n) => n !== null)\n                // @ts-ignore\n                const tr = this._tr.replace(0, this.prosemirrorView.state.doc.content.size, new PModel.Slice(PModel.Fragment.from(fragmentContent), 0, 0))\n                this.prosemirrorView.dispatch(tr.setMeta(ySyncPluginKey, {isChangeOrigin: true}))\n            }, ySyncPluginKey)\n        })\n    }\n\n    /**\n     * @param {Array<Y.YEvent<any>>} events\n     * @param {Y.Transaction} transaction\n     */\n    _typeChanged(events, transaction) {\n        if (this.prosemirrorView == null) return\n        const syncState = ySyncPluginKey.getState(this.prosemirrorView.state)\n        if (events.length === 0 || syncState.snapshot != null || syncState.prevSnapshot != null) {\n            // drop out if snapshot is active\n            this.renderSnapshot(syncState.snapshot, syncState.prevSnapshot)\n            return\n        }\n        this.mux(() => {\n            /**\n             * @param {any} _\n             * @param {Y.AbstractType<any>} type\n             */\n            const delType = (_, type) => this.mapping.delete(type)\n            Y.iterateDeletedStructs(transaction, transaction.deleteSet, (struct) => {\n                if (struct.constructor === Y.Item) {\n                    const type = /** @type {Y.ContentType} */ (/** @type {Y.Item} */ (struct).content).type\n                    type && this.mapping.delete(type)\n                }\n            })\n            transaction.changed.forEach(delType)\n            transaction.changedParentTypes.forEach(delType)\n            const fragmentContent = this.type.toArray().map((t) => createNodeIfNotExists(/** @type {Y.XmlElement | Y.XmlHook} */ (t), this.prosemirrorView.state.schema, this)).filter((n) => n !== null)\n            // @ts-ignore\n            let tr = this._tr.replace(0, this.prosemirrorView.state.doc.content.size, new PModel.Slice(PModel.Fragment.from(fragmentContent), 0, 0))\n            restoreRelativeSelection(tr, this.beforeTransactionSelection, this)\n            tr = tr.setMeta(ySyncPluginKey, {\n                isChangeOrigin: true, isUndoRedoOperation: transaction.origin instanceof Y.UndoManager\n            })\n            if (this.beforeTransactionSelection !== null && this._isLocalCursorInView()) {\n                tr.scrollIntoView()\n            }\n            this.prosemirrorView.dispatch(tr)\n        })\n    }\n\n    /**\n     * @param {import('prosemirror-model').Node} doc\n     */\n    _prosemirrorChanged(doc) {\n        this.doc.transact(() => {\n            updateYFragment(this.doc, this.type, doc, this)\n            this.beforeTransactionSelection = getRelativeSelection(this, this.prosemirrorView.state)\n        }, ySyncPluginKey)\n    }\n\n    /**\n     * View is ready to listen to changes. Register observers.\n     * @param {any} prosemirrorView\n     */\n    initView(prosemirrorView) {\n        if (this.prosemirrorView != null) this.destroy()\n        this.prosemirrorView = prosemirrorView\n        this.doc.on('beforeAllTransactions', this.beforeAllTransactions)\n        this.doc.on('afterAllTransactions', this.afterAllTransactions)\n        this.type.observeDeep(this._observeFunction)\n    }\n\n    destroy() {\n        if (this.prosemirrorView == null) return\n        this.prosemirrorView = null\n        this.type.unobserveDeep(this._observeFunction)\n        this.doc.off('beforeAllTransactions', this.beforeAllTransactions)\n        this.doc.off('afterAllTransactions', this.afterAllTransactions)\n    }\n}\n\n/**\n * @private\n * @param {Y.XmlElement | Y.XmlHook} el\n * @param {PModel.Schema} schema\n * @param {BindingMetadata} meta\n * @param {Y.Snapshot} [snapshot]\n * @param {Y.Snapshot} [prevSnapshot]\n * @param {function('removed' | 'added', Y.ID):any} [computeYChange]\n * @return {PModel.Node | null}\n */\nconst createNodeIfNotExists = (el, schema, meta, snapshot, prevSnapshot, computeYChange) => {\n    const node = /** @type {PModel.Node} */ (meta.mapping.get(el))\n    if (node === undefined) {\n        if (el instanceof Y.XmlElement) {\n            return createNodeFromYElement(el, schema, meta, snapshot, prevSnapshot, computeYChange)\n        } else {\n            throw error.methodUnimplemented() // we are currently not handling hooks\n        }\n    }\n    return node\n}\n\n/**\n * @private\n * @param {Y.XmlElement} el\n * @param {any} schema\n * @param {BindingMetadata} meta\n * @param {Y.Snapshot} [snapshot]\n * @param {Y.Snapshot} [prevSnapshot]\n * @param {function('removed' | 'added', Y.ID):any} [computeYChange]\n * @return {PModel.Node | null} Returns node if node could be created. Otherwise it deletes the yjs type and returns null\n */\nexport const createNodeFromYElement = (el, schema, meta, snapshot, prevSnapshot, computeYChange) => {\n    const children = []\n    // Check if this element was removed (not visible in snapshot)\n    const isRemoved = snapshot !== undefined && prevSnapshot !== undefined && !isVisible(/** @type {Y.Item} */ (el._item), snapshot)\n    // Check if element existed in prevSnapshot\n    const existedInPrev = prevSnapshot !== undefined && isVisible(/** @type {Y.Item} */ (el._item), prevSnapshot)\n    /**\n     * @param {Y.XmlElement | Y.XmlText} type\n     */\n    const createChildren = (type) => {\n        if (type instanceof Y.XmlElement) {\n            const n = createNodeIfNotExists(type, schema, meta, snapshot, prevSnapshot, computeYChange)\n            if (n !== null) {\n                children.push(n)\n            }\n        } else {\n            // If the next ytext exists and was created by us, move the content to the current ytext.\n            // This is a fix for #160 -- duplication of characters when two Y.Text exist next to each\n            // other.\n            const nextytext = /** @type {Y.ContentType} */ (type._item.right?.content)?.type\n            if (nextytext instanceof Y.Text && !nextytext._item.deleted && nextytext._item.id.client === nextytext.doc.clientID) {\n                type.applyDelta([{retain: type.length}, ...nextytext.toDelta()])\n                nextytext.doc.transact(tr => {\n                    nextytext._item.delete(tr)\n                })\n            }\n            // now create the prosemirror text nodes\n            const ns = createTextNodesFromYText(type, schema, meta, snapshot, prevSnapshot, computeYChange)\n            if (ns !== null) {\n                ns.forEach((textchild) => {\n                    if (textchild !== null) {\n                        children.push(textchild)\n                    }\n                })\n            }\n        }\n    }\n    if (snapshot === undefined || prevSnapshot === undefined) {\n        el.toArray().forEach(createChildren)\n    } else if (isRemoved) {\n        // For removed elements:\n        // - If existed in prevSnapshot: get children as they were then\n        // - If added after prevSnapshot (and deleted before snapshot): get current children\n        if (existedInPrev) {\n            Y.typeListToArraySnapshot(el, prevSnapshot).forEach(createChildren)\n        } else {\n            // Element was added and deleted between the two snapshots\n            // Get current children (without snapshot filter)\n            el.toArray().forEach(createChildren)\n        }\n    } else {\n        // For non-removed elements, use combined snapshot to show both old and new content\n        Y.typeListToArraySnapshot(el, new Y.Snapshot(prevSnapshot.ds, snapshot.sv))\n            .forEach(createChildren)\n    }\n    try {\n        // Determine the best snapshot to use for attributes:\n        // - If removed and existed in prevSnapshot: use prevSnapshot\n        // - If removed but didn't exist in prevSnapshot (added then removed): use no snapshot (current doc state)\n        // - Otherwise: use snapshot\n        let attrs\n\n        // DEBUG logging for ALL elements when snapshots are present\n        if (snapshot !== undefined && prevSnapshot !== undefined) {\n            const visibleInSnapshot = isVisible(/** @type {Y.Item} */ (el._item), snapshot)\n            const visibleInPrevSnapshot = isVisible(/** @type {Y.Item} */ (el._item), prevSnapshot)\n            console.log('[y-tiptap DEBUG] ================')\n            console.log('[y-tiptap DEBUG] Element:', el.nodeName)\n            console.log('[y-tiptap DEBUG] el._item.deleted:', el._item?.deleted)\n            console.log('[y-tiptap DEBUG] visibleInSnapshot:', visibleInSnapshot)\n            console.log('[y-tiptap DEBUG] visibleInPrevSnapshot:', visibleInPrevSnapshot)\n            console.log('[y-tiptap DEBUG] isRemoved (calculated):', isRemoved)\n            console.log('[y-tiptap DEBUG] existedInPrev (calculated):', existedInPrev)\n            console.log('[y-tiptap DEBUG] el.getAttributes():', JSON.stringify(el.getAttributes()))\n            console.log('[y-tiptap DEBUG] el.getAttributes(prevSnapshot):', JSON.stringify(el.getAttributes(prevSnapshot)))\n            console.log('[y-tiptap DEBUG] el.getAttributes(snapshot):', JSON.stringify(el.getAttributes(snapshot)))\n            console.log('[y-tiptap DEBUG] ================')\n        }\n\n        if (isRemoved) {\n            if (existedInPrev) {\n                // Element existed in prevSnapshot, get attributes from there\n                attrs = el.getAttributes(prevSnapshot)\n            } else {\n                // Element was added after prevSnapshot and deleted before snapshot\n                // Get attributes from the current doc state (without snapshot filter)\n                attrs = el.getAttributes()\n            }\n        } else {\n            attrs = el.getAttributes(snapshot)\n        }\n        if (snapshot !== undefined) {\n            if (isRemoved) {\n                attrs.ychange = computeYChange ? computeYChange('removed', /** @type {Y.Item} */ (el._item).id) : {type: 'removed'}\n            } else if (!isVisible(/** @type {Y.Item} */ (el._item), prevSnapshot)) {\n                attrs.ychange = computeYChange ? computeYChange('added', /** @type {Y.Item} */ (el._item).id) : {type: 'added'}\n            }\n        }\n        const node = schema.node(el.nodeName, attrs, children)\n        meta.mapping.set(el, node)\n        return node\n    } catch (e) {\n        // an error occured while creating the node. This is probably a result of a concurrent action.\n        /** @type {Y.Doc} */ (el.doc).transact((transaction) => {\n            /** @type {Y.Item} */ (el._item).delete(transaction)\n        }, ySyncPluginKey)\n        meta.mapping.delete(el)\n        return null\n    }\n}\n\n/**\n * @private\n * @param {Y.XmlText} text\n * @param {import('prosemirror-model').Schema} schema\n * @param {BindingMetadata} _meta\n * @param {Y.Snapshot} [snapshot]\n * @param {Y.Snapshot} [prevSnapshot]\n * @param {function('removed' | 'added', Y.ID):any} [computeYChange]\n * @return {Array<PModel.Node>|null}\n */\nconst createTextNodesFromYText = (text, schema, _meta, snapshot, prevSnapshot, computeYChange) => {\n    const nodes = []\n    // Check if text node is removed and whether it existed in prevSnapshot\n    const isTextRemoved = snapshot !== undefined && prevSnapshot !== undefined &&\n        !isVisible(/** @type {Y.Item} */ (text._item), snapshot)\n    const existedInPrev = prevSnapshot !== undefined &&\n        isVisible(/** @type {Y.Item} */ (text._item), prevSnapshot)\n\n    // Determine which snapshot to use for delta:\n    // - If removed and existed in prevSnapshot: use prevSnapshot\n    // - If removed but didn't exist in prevSnapshot (added then removed): use no snapshot\n    // - Otherwise: use normal snapshot comparison\n    let deltas\n    if (isTextRemoved) {\n        if (existedInPrev) {\n            deltas = text.toDelta(prevSnapshot, undefined, computeYChange)\n        } else {\n            // Added after prevSnapshot and deleted before snapshot - get current content\n            deltas = text.toDelta()\n        }\n    } else {\n        deltas = text.toDelta(snapshot, prevSnapshot, computeYChange)\n    }\n\n    try {\n        for (let i = 0; i < deltas.length; i++) {\n            const delta = deltas[i]\n            const attrs = delta.attributes || {}\n            // For removed text nodes, add the ychange marker\n            if (isTextRemoved && computeYChange) {\n                attrs.ychange = computeYChange('removed', /** @type {Y.Item} */ (text._item).id)\n            }\n            nodes.push(schema.text(delta.insert, attributesToMarks(attrs, schema)))\n        }\n    } catch (e) {\n        // an error occured while creating the node. This is probably a result of a concurrent action.\n        /** @type {Y.Doc} */ (text.doc).transact((transaction) => {\n            /** @type {Y.Item} */ (text._item).delete(transaction)\n        }, ySyncPluginKey)\n        return null\n    }\n    // @ts-ignore\n    return nodes\n}\n\n/**\n * @private\n * @param {Array<any>} nodes prosemirror node\n * @param {BindingMetadata} meta\n * @return {Y.XmlText}\n */\nconst createTypeFromTextNodes = (nodes, meta) => {\n    const type = new Y.XmlText()\n    const delta = nodes.map((node) => ({\n        // @ts-ignore\n        insert: node.text, attributes: marksToAttributes(node.marks, meta)\n    }))\n    type.applyDelta(delta)\n    meta.mapping.set(type, nodes)\n    return type\n}\n\n/**\n * @private\n * @param {any} node prosemirror node\n * @param {BindingMetadata} meta\n * @return {Y.XmlElement}\n */\nconst createTypeFromElementNode = (node, meta) => {\n    const type = new Y.XmlElement(node.type.name)\n    for (const key in node.attrs) {\n        const val = node.attrs[key]\n        if (val !== null && key !== 'ychange') {\n            type.setAttribute(key, val)\n        }\n    }\n    type.insert(0, normalizePNodeContent(node).map((n) => createTypeFromTextOrElementNode(n, meta)))\n    meta.mapping.set(type, node)\n    return type\n}\n\n/**\n * @private\n * @param {PModel.Node|Array<PModel.Node>} node prosemirror text node\n * @param {BindingMetadata} meta\n * @return {Y.XmlElement|Y.XmlText}\n */\nconst createTypeFromTextOrElementNode = (node, meta) => node instanceof Array ? createTypeFromTextNodes(node, meta) : createTypeFromElementNode(node, meta)\n\n/**\n * @param {any} val\n */\nconst isObject = (val) => typeof val === 'object' && val !== null\n\n/**\n * @param {any} pattrs\n * @param {any} yattrs\n */\nconst equalAttrs = (pattrs, yattrs) => {\n    const keys = Object.keys(pattrs).filter((key) => pattrs[key] !== null)\n    let eq = keys.length === Object.keys(yattrs).filter((key) => yattrs[key] !== null).length\n    for (let i = 0; i < keys.length && eq; i++) {\n        const key = keys[i]\n        const l = pattrs[key]\n        const r = yattrs[key]\n        eq = key === 'ychange' || l === r || (isObject(l) && isObject(r) && equalAttrs(l, r))\n    }\n    return eq\n}\n\n/**\n * @typedef {Array<Array<PModel.Node>|PModel.Node>} NormalizedPNodeContent\n */\n\n/**\n * @param {any} pnode\n * @return {NormalizedPNodeContent}\n */\nconst normalizePNodeContent = (pnode) => {\n    const c = pnode.content.content\n    const res = []\n    for (let i = 0; i < c.length; i++) {\n        const n = c[i]\n        if (n.isText) {\n            const textNodes = []\n            for (let tnode = c[i]; i < c.length && tnode.isText; tnode = c[++i]) {\n                textNodes.push(tnode)\n            }\n            i--\n            res.push(textNodes)\n        } else {\n            res.push(n)\n        }\n    }\n    return res\n}\n\n/**\n * @param {Y.XmlText} ytext\n * @param {Array<any>} ptexts\n */\nconst equalYTextPText = (ytext, ptexts) => {\n    const delta = ytext.toDelta()\n    return delta.length === ptexts.length && delta.every(/** @type {(d:any,i:number) => boolean} */(d, i) => d.insert === /** @type {any} */ (ptexts[i]).text && object.keys(d.attributes || {}).length === ptexts[i].marks.length && object.every(d.attributes, (attr, /** @type {string} */ yattrname) => {\n        const markname = yattr2markname(yattrname)\n        const pmarks = ptexts[i].marks\n\n        const pmark = pmarks.find(/** @param {any} mark */mark => mark.type.name === markname)\n\n        // Ensure the pmark is present in the ptexts before checking equality. When replacing a mark with another mark\n        // the pmark will be missing from the ptexts and the equalAttrs will throw an error.\n        if (!pmark) {\n            return false\n        }\n\n        return equalAttrs(attr, pmarks.find(/** @param {any} mark */mark => mark.type.name === markname)?.attrs)\n    }))\n}\n\n/**\n * @param {Y.XmlElement|Y.XmlText|Y.XmlHook} ytype\n * @param {any|Array<any>} pnode\n */\nconst equalYTypePNode = (ytype, pnode) => {\n    if (ytype instanceof Y.XmlElement && !(pnode instanceof Array) && matchNodeName(ytype, pnode)) {\n        const normalizedContent = normalizePNodeContent(pnode)\n        return ytype._length === normalizedContent.length && equalAttrs(ytype.getAttributes(), pnode.attrs) && ytype.toArray().every((ychild, i) => equalYTypePNode(ychild, normalizedContent[i]))\n    }\n    return ytype instanceof Y.XmlText && pnode instanceof Array && equalYTextPText(ytype, pnode)\n}\n\n/**\n * @param {PModel.Node | Array<PModel.Node> | undefined} mapped\n * @param {PModel.Node | Array<PModel.Node>} pcontent\n */\nconst mappedIdentity = (mapped, pcontent) => mapped === pcontent || (mapped instanceof Array && pcontent instanceof Array && mapped.length === pcontent.length && mapped.every((a, i) => pcontent[i] === a))\n\n/**\n * @param {Y.XmlElement} ytype\n * @param {PModel.Node} pnode\n * @param {BindingMetadata} meta\n * @return {{ foundMappedChild: boolean, equalityFactor: number }}\n */\nconst computeChildEqualityFactor = (ytype, pnode, meta) => {\n    const yChildren = ytype.toArray()\n    const pChildren = normalizePNodeContent(pnode)\n    const pChildCnt = pChildren.length\n    const yChildCnt = yChildren.length\n    const minCnt = math.min(yChildCnt, pChildCnt)\n    let left = 0\n    let right = 0\n    let foundMappedChild = false\n    for (; left < minCnt; left++) {\n        const leftY = yChildren[left]\n        const leftP = pChildren[left]\n        if (mappedIdentity(meta.mapping.get(leftY), leftP)) {\n            foundMappedChild = true // definite (good) match!\n        } else if (!equalYTypePNode(leftY, leftP)) {\n            break\n        }\n    }\n    for (; left + right < minCnt; right++) {\n        const rightY = yChildren[yChildCnt - right - 1]\n        const rightP = pChildren[pChildCnt - right - 1]\n        if (mappedIdentity(meta.mapping.get(rightY), rightP)) {\n            foundMappedChild = true\n        } else if (!equalYTypePNode(rightY, rightP)) {\n            break\n        }\n    }\n    return {\n        equalityFactor: left + right, foundMappedChild\n    }\n}\n\n/**\n * @param {Y.Text} ytext\n */\nconst ytextTrans = (ytext) => {\n    let str = ''\n    /**\n     * @type {Y.Item|null}\n     */\n    let n = ytext._start\n    const nAttrs = {}\n    while (n !== null) {\n        if (!n.deleted) {\n            if (n.countable && n.content instanceof Y.ContentString) {\n                str += n.content.str\n            } else if (n.content instanceof Y.ContentFormat) {\n                nAttrs[n.content.key] = null\n            }\n        }\n        n = n.right\n    }\n    return {\n        str, nAttrs\n    }\n}\n\n/**\n * @todo test this more\n *\n * @param {Y.Text} ytext\n * @param {Array<any>} ptexts\n * @param {BindingMetadata} meta\n */\nconst updateYText = (ytext, ptexts, meta) => {\n    meta.mapping.set(ytext, ptexts)\n    const {nAttrs, str} = ytextTrans(ytext)\n    const content = ptexts.map((p) => ({\n        insert: /** @type {any} */ (p).text, attributes: Object.assign({}, nAttrs, marksToAttributes(p.marks, meta))\n    }))\n    const {insert, remove, index} = simpleDiff(str, content.map((c) => c.insert).join(''))\n    ytext.delete(index, remove)\n    ytext.insert(index, insert)\n    ytext.applyDelta(content.map((c) => ({retain: c.insert.length, attributes: c.attributes})))\n}\n\nconst hashedMarkNameRegex = /(.*)(--[a-zA-Z0-9+/=]{8})$/\n/**\n * @param {string} attrName\n */\nexport const yattr2markname = attrName => hashedMarkNameRegex.exec(attrName)?.[1] ?? attrName\n\n/**\n * @todo move this to markstoattributes\n *\n * @param {Object<string, any>} attrs\n * @param {import('prosemirror-model').Schema} schema\n */\nexport const attributesToMarks = (attrs, schema) => {\n    /**\n     * @type {Array<import('prosemirror-model').Mark>}\n     */\n    const marks = []\n    for (const markName in attrs) {\n        // remove hashes if necessary\n        marks.push(schema.mark(yattr2markname(markName), attrs[markName]))\n    }\n    return marks\n}\n\n/**\n * @param {Array<import('prosemirror-model').Mark>} marks\n * @param {BindingMetadata} meta\n */\nconst marksToAttributes = (marks, meta) => {\n    const pattrs = {}\n    marks.forEach((mark) => {\n        if (mark.type.name !== 'ychange') {\n            const isOverlapping = map.setIfUndefined(meta.isOMark, mark.type, () => !mark.type.excludes(mark.type))\n            pattrs[isOverlapping ? `${mark.type.name}--${utils.hashOfJSON(mark.toJSON())}` : mark.type.name] = mark.attrs\n        }\n    })\n    return pattrs\n}\n\n/**\n * Update a yDom node by syncing the current content of the prosemirror node.\n *\n * This is a y-prosemirror internal feature that you can use at your own risk.\n *\n * @private\n * @unstable\n *\n * @param {{transact: Function}} y\n * @param {Y.XmlFragment} yDomFragment\n * @param {any} pNode\n * @param {BindingMetadata} meta\n */\nexport const updateYFragment = (y, yDomFragment, pNode, meta) => {\n    if (yDomFragment instanceof Y.XmlElement && yDomFragment.nodeName !== pNode.type.name) {\n        throw new Error('node name mismatch!')\n    }\n    meta.mapping.set(yDomFragment, pNode)\n    // update attributes\n    if (yDomFragment instanceof Y.XmlElement) {\n        const yDomAttrs = yDomFragment.getAttributes()\n        const pAttrs = pNode.attrs\n        for (const key in pAttrs) {\n            if (pAttrs[key] !== null) {\n                if (yDomAttrs[key] !== pAttrs[key] && key !== 'ychange') {\n                    yDomFragment.setAttribute(key, pAttrs[key])\n                }\n            } else {\n                yDomFragment.removeAttribute(key)\n            }\n        }\n        // remove all keys that are no longer in pAttrs\n        for (const key in yDomAttrs) {\n            if (pAttrs[key] === undefined) {\n                yDomFragment.removeAttribute(key)\n            }\n        }\n    }\n    // update children\n    const pChildren = normalizePNodeContent(pNode)\n    const pChildCnt = pChildren.length\n    const yChildren = yDomFragment.toArray()\n    const yChildCnt = yChildren.length\n    const minCnt = math.min(pChildCnt, yChildCnt)\n    let left = 0\n    let right = 0\n    // find number of matching elements from left\n    for (; left < minCnt; left++) {\n        const leftY = yChildren[left]\n        const leftP = pChildren[left]\n        if (!mappedIdentity(meta.mapping.get(leftY), leftP)) {\n            if (equalYTypePNode(leftY, leftP)) {\n                // update mapping\n                meta.mapping.set(leftY, leftP)\n            } else {\n                break\n            }\n        }\n    }\n    // find number of matching elements from right\n    for (; right + left + 1 < minCnt; right++) {\n        const rightY = yChildren[yChildCnt - right - 1]\n        const rightP = pChildren[pChildCnt - right - 1]\n        if (!mappedIdentity(meta.mapping.get(rightY), rightP)) {\n            if (equalYTypePNode(rightY, rightP)) {\n                // update mapping\n                meta.mapping.set(rightY, rightP)\n            } else {\n                break\n            }\n        }\n    }\n    y.transact(() => {\n        // try to compare and update\n        while (yChildCnt - left - right > 0 && pChildCnt - left - right > 0) {\n            const leftY = yChildren[left]\n            const leftP = pChildren[left]\n            const rightY = yChildren[yChildCnt - right - 1]\n            const rightP = pChildren[pChildCnt - right - 1]\n            if (leftY instanceof Y.XmlText && leftP instanceof Array) {\n                if (!equalYTextPText(leftY, leftP)) {\n                    updateYText(leftY, leftP, meta)\n                }\n                left += 1\n            } else {\n                let updateLeft = leftY instanceof Y.XmlElement && matchNodeName(leftY, leftP)\n                let updateRight = rightY instanceof Y.XmlElement && matchNodeName(rightY, rightP)\n                if (updateLeft && updateRight) {\n                    // decide which which element to update\n                    const equalityLeft = computeChildEqualityFactor(/** @type {Y.XmlElement} */ (leftY), /** @type {PModel.Node} */ (leftP), meta)\n                    const equalityRight = computeChildEqualityFactor(/** @type {Y.XmlElement} */ (rightY), /** @type {PModel.Node} */ (rightP), meta)\n                    if (equalityLeft.foundMappedChild && !equalityRight.foundMappedChild) {\n                        updateRight = false\n                    } else if (!equalityLeft.foundMappedChild && equalityRight.foundMappedChild) {\n                        updateLeft = false\n                    } else if (equalityLeft.equalityFactor < equalityRight.equalityFactor) {\n                        updateLeft = false\n                    } else {\n                        updateRight = false\n                    }\n                }\n                if (updateLeft) {\n                    updateYFragment(y, /** @type {Y.XmlFragment} */ (leftY), /** @type {PModel.Node} */ (leftP), meta)\n                    left += 1\n                } else if (updateRight) {\n                    updateYFragment(y, /** @type {Y.XmlFragment} */ (rightY), /** @type {PModel.Node} */ (rightP), meta)\n                    right += 1\n                } else {\n                    meta.mapping.delete(yDomFragment.get(left))\n                    yDomFragment.delete(left, 1)\n                    yDomFragment.insert(left, [createTypeFromTextOrElementNode(leftP, meta)])\n                    left += 1\n                }\n            }\n        }\n        const yDelLen = yChildCnt - left - right\n        if (yChildCnt === 1 && pChildCnt === 0 && yChildren[0] instanceof Y.XmlText) {\n            meta.mapping.delete(yChildren[0])\n            // Edge case handling https://github.com/yjs/y-prosemirror/issues/108\n            // Only delete the content of the Y.Text to retain remote changes on the same Y.Text object\n            yChildren[0].delete(0, yChildren[0].length)\n        } else if (yDelLen > 0) {\n            yDomFragment.slice(left, left + yDelLen).forEach(type => meta.mapping.delete(type))\n            yDomFragment.delete(left, yDelLen)\n        }\n        if (left + right < pChildCnt) {\n            const ins = []\n            for (let i = left; i < pChildCnt - right; i++) {\n                ins.push(createTypeFromTextOrElementNode(pChildren[i], meta))\n            }\n            yDomFragment.insert(left, ins)\n        }\n    }, ySyncPluginKey)\n}\n\n/**\n * @function\n * @param {Y.XmlElement} yElement\n * @param {any} pNode Prosemirror Node\n */\nconst matchNodeName = (yElement, pNode) => !(pNode instanceof Array) && yElement.nodeName === pNode.type.name\n","import {updateYFragment, createNodeFromYElement, yattr2markname, createEmptyMeta} from './plugins/sync-plugin.js' // eslint-disable-line\nimport {ySyncPluginKey} from './plugins/keys.js'\nimport * as Y from 'yjs'\nimport {EditorView} from 'prosemirror-view' // eslint-disable-line\nimport {Node, Schema, Fragment} from 'prosemirror-model' // eslint-disable-line\nimport * as error from 'lib0/error'\nimport * as map from 'lib0/map'\nimport * as eventloop from 'lib0/eventloop'\n\n/**\n * Either a node if type is YXmlElement or an Array of text nodes if YXmlText\n * @typedef {Map<Y.AbstractType, Node | Array<Node>>} ProsemirrorMapping\n */\n\n/**\n * Is null if no timeout is in progress.\n * Is defined if a timeout is in progress.\n * Maps from view\n * @type {Map<EditorView, Map<any, any>>|null}\n */\nlet viewsToUpdate = null\n\nconst updateMetas = () => {\n    const ups = /** @type {Map<EditorView, Map<any, any>>} */ (viewsToUpdate)\n    viewsToUpdate = null\n    ups.forEach((metas, view) => {\n        const tr = view.state.tr\n        const syncState = ySyncPluginKey.getState(view.state)\n        if (syncState && syncState.binding && !syncState.binding.isDestroyed) {\n            metas.forEach((val, key) => {\n                tr.setMeta(key, val)\n            })\n            view.dispatch(tr)\n        }\n    })\n}\n\nexport const setMeta = (view, key, value) => {\n    if (!viewsToUpdate) {\n        viewsToUpdate = new Map()\n        eventloop.timeout(0, updateMetas)\n    }\n    map.setIfUndefined(viewsToUpdate, view, map.create).set(key, value)\n}\n\n/**\n * Transforms a Prosemirror based absolute position to a Yjs Cursor (relative position in the Yjs model).\n *\n * @param {number} pos\n * @param {Y.XmlFragment} type\n * @param {ProsemirrorMapping} mapping\n * @return {any} relative position\n */\nexport const absolutePositionToRelativePosition = (pos, type, mapping) => {\n    if (pos === 0) {\n        return Y.createRelativePositionFromTypeIndex(type, 0, -1)\n    }\n    /**\n     * @type {any}\n     */\n    let n = type._first === null ? null : /** @type {Y.ContentType} */ (type._first.content).type\n    while (n !== null && type !== n) {\n        if (n instanceof Y.XmlText) {\n            if (n._length >= pos) {\n                return Y.createRelativePositionFromTypeIndex(n, pos, -1)\n            } else {\n                pos -= n._length\n            }\n            if (n._item !== null && n._item.next !== null) {\n                n = /** @type {Y.ContentType} */ (n._item.next.content).type\n            } else {\n                do {\n                    n = n._item === null ? null : n._item.parent\n                    pos--\n                } while (n !== type && n !== null && n._item !== null && n._item.next === null)\n                if (n !== null && n !== type) {\n                    // @ts-gnore we know that n.next !== null because of above loop conditition\n                    n = n._item === null ? null : /** @type {Y.ContentType} */ (/** @type Y.Item */ (n._item.next).content).type\n                }\n            }\n        } else {\n            const pNodeSize = /** @type {any} */ (mapping.get(n) || {nodeSize: 0}).nodeSize\n            if (n._first !== null && pos < pNodeSize) {\n                n = /** @type {Y.ContentType} */ (n._first.content).type\n                pos--\n            } else {\n                if (pos === 1 && n._length === 0 && pNodeSize > 1) {\n                    // edge case, should end in this paragraph\n                    return new Y.RelativePosition(n._item === null ? null : n._item.id, n._item === null ? Y.findRootTypeKey(n) : null, null)\n                }\n                pos -= pNodeSize\n                if (n._item !== null && n._item.next !== null) {\n                    n = /** @type {Y.ContentType} */ (n._item.next.content).type\n                } else {\n                    if (pos === 0) {\n                        // set to end of n.parent\n                        n = n._item === null ? n : n._item.parent\n                        return new Y.RelativePosition(n._item === null ? null : n._item.id, n._item === null ? Y.findRootTypeKey(n) : null, null)\n                    }\n                    do {\n                        n = /** @type {Y.Item} */ (n._item).parent\n                        pos--\n                    } while (n !== type && /** @type {Y.Item} */ (n._item).next === null)\n                    // if n is null at this point, we have an unexpected case\n                    if (n !== type) {\n                        // We know that n._item.next is defined because of above loop condition\n                        n = /** @type {Y.ContentType} */ (/** @type {Y.Item} */ (/** @type {Y.Item} */ (n._item).next).content).type\n                    }\n                }\n            }\n        }\n        if (n === null) {\n            throw error.unexpectedCase()\n        }\n        if (pos === 0 && n.constructor !== Y.XmlText && n !== type) { // TODO: set to <= 0\n            return createRelativePosition(n._item.parent, n._item)\n        }\n    }\n    return Y.createRelativePositionFromTypeIndex(type, type._length, -1)\n}\n\nconst createRelativePosition = (type, item) => {\n    let typeid = null\n    let tname = null\n    if (type._item === null) {\n        tname = Y.findRootTypeKey(type)\n    } else {\n        typeid = Y.createID(type._item.id.client, type._item.id.clock)\n    }\n    return new Y.RelativePosition(typeid, tname, item.id)\n}\n\n/**\n * @param {Y.Doc} y\n * @param {Y.XmlFragment} documentType Top level type that is bound to pView\n * @param {any} relPos Encoded Yjs based relative position\n * @param {ProsemirrorMapping} mapping\n * @return {null|number}\n */\nexport const relativePositionToAbsolutePosition = (y, documentType, relPos, mapping) => {\n    const decodedPos = Y.createAbsolutePositionFromRelativePosition(relPos, y)\n    if (decodedPos === null || (decodedPos.type !== documentType && !Y.isParentOf(documentType, decodedPos.type._item))) {\n        return null\n    }\n    let type = decodedPos.type\n    let pos = 0\n    if (type.constructor === Y.XmlText) {\n        pos = decodedPos.index\n    } else if (type._item === null || !type._item.deleted) {\n        let n = type._first\n        let i = 0\n        while (i < type._length && i < decodedPos.index && n !== null) {\n            if (!n.deleted) {\n                const t = /** @type {Y.ContentType} */ (n.content).type\n                i++\n                if (t instanceof Y.XmlText) {\n                    pos += t._length\n                } else {\n                    pos += /** @type {any} */ (mapping.get(t)).nodeSize\n                }\n            }\n            n = /** @type {Y.Item} */ (n.right)\n        }\n        pos += 1 // increase because we go out of n\n    }\n    while (type !== documentType && type._item !== null) {\n        // @ts-ignore\n        const parent = type._item.parent\n        // @ts-ignore\n        if (parent._item === null || !parent._item.deleted) {\n            pos += 1 // the start tag\n            let n = /** @type {Y.AbstractType} */ (parent)._first\n            // now iterate until we found type\n            while (n !== null) {\n                const contentType = /** @type {Y.ContentType} */ (n.content).type\n                if (contentType === type) {\n                    break\n                }\n                if (!n.deleted) {\n                    if (contentType instanceof Y.XmlText) {\n                        pos += contentType._length\n                    } else {\n                        pos += /** @type {any} */ (mapping.get(contentType)).nodeSize\n                    }\n                }\n                n = n.right\n            }\n        }\n        type = /** @type {Y.AbstractType} */ (parent)\n    }\n    return pos - 1 // we don't count the most outer tag, because it is a fragment\n}\n\n/**\n * Utility function for converting an Y.Fragment to a ProseMirror fragment.\n *\n * @param {Y.XmlFragment} yXmlFragment\n * @param {Schema} schema\n */\nexport const yXmlFragmentToProseMirrorFragment = (yXmlFragment, schema) => {\n    const fragmentContent = yXmlFragment.toArray().map((t) => createNodeFromYElement(/** @type {Y.XmlElement} */ (t), schema, createEmptyMeta())).filter((n) => n !== null)\n    return Fragment.fromArray(fragmentContent)\n}\n\n/**\n * Utility function for converting an Y.Fragment to a ProseMirror node.\n *\n * @param {Y.XmlFragment} yXmlFragment\n * @param {Schema} schema\n */\nexport const yXmlFragmentToProseMirrorRootNode = (yXmlFragment, schema) => schema.topNodeType.create(null, yXmlFragmentToProseMirrorFragment(yXmlFragment, schema))\n\n/**\n * The initial ProseMirror content should be supplied by Yjs. This function transforms a Y.Fragment\n * to a ProseMirror Doc node and creates a mapping that is used by the sync plugin.\n *\n * @param {Y.XmlFragment} yXmlFragment\n * @param {Schema} schema\n *\n * @todo deprecate mapping property\n */\nexport const initProseMirrorDoc = (yXmlFragment, schema) => {\n    const meta = createEmptyMeta()\n    const fragmentContent = yXmlFragment.toArray().map((t) => createNodeFromYElement(/** @type {Y.XmlElement} */ (t), schema, meta)).filter((n) => n !== null)\n    const doc = schema.topNodeType.create(null, Fragment.fromArray(fragmentContent))\n    return {doc, meta, mapping: meta.mapping}\n}\n\n/**\n * Utility method to convert a Prosemirror Doc Node into a Y.Doc.\n *\n * This can be used when importing existing content to Y.Doc for the first time,\n * note that this should not be used to rehydrate a Y.Doc from a database once\n * collaboration has begun as all history will be lost\n *\n * @param {Node} doc\n * @param {string} xmlFragment\n * @return {Y.Doc}\n */\nexport function prosemirrorToYDoc(doc, xmlFragment = 'prosemirror') {\n    const ydoc = new Y.Doc()\n    const type = /** @type {Y.XmlFragment} */ (ydoc.get(xmlFragment, Y.XmlFragment))\n    if (!type.doc) {\n        return ydoc\n    }\n\n    prosemirrorToYXmlFragment(doc, type)\n    return type.doc\n}\n\n/**\n * Utility method to update an empty Y.XmlFragment with content from a Prosemirror Doc Node.\n *\n * This can be used when importing existing content to Y.Doc for the first time,\n * note that this should not be used to rehydrate a Y.Doc from a database once\n * collaboration has begun as all history will be lost\n *\n * Note: The Y.XmlFragment does not need to be part of a Y.Doc document at the time that this\n * method is called, but it must be added before any other operations are performed on it.\n *\n * @param {Node} doc prosemirror document.\n * @param {Y.XmlFragment} [xmlFragment] If supplied, an xml fragment to be\n *   populated from the prosemirror state; otherwise a new XmlFragment will be created.\n * @return {Y.XmlFragment}\n */\nexport function prosemirrorToYXmlFragment(doc, xmlFragment) {\n    const type = xmlFragment || new Y.XmlFragment()\n    const ydoc = type.doc ? type.doc : {transact: (transaction) => transaction(undefined)}\n    updateYFragment(ydoc, type, doc, {mapping: new Map(), isOMark: new Map()})\n    return type\n}\n\n/**\n * Utility method to convert Prosemirror compatible JSON into a Y.Doc.\n *\n * This can be used when importing existing content to Y.Doc for the first time,\n * note that this should not be used to rehydrate a Y.Doc from a database once\n * collaboration has begun as all history will be lost\n *\n * @param {Schema} schema\n * @param {any} state\n * @param {string} xmlFragment\n * @return {Y.Doc}\n */\nexport function prosemirrorJSONToYDoc(schema, state, xmlFragment = 'prosemirror') {\n    const doc = Node.fromJSON(schema, state)\n    return prosemirrorToYDoc(doc, xmlFragment)\n}\n\n/**\n * Utility method to convert Prosemirror compatible JSON to a Y.XmlFragment\n *\n * This can be used when importing existing content to Y.Doc for the first time,\n * note that this should not be used to rehydrate a Y.Doc from a database once\n * collaboration has begun as all history will be lost\n *\n * @param {Schema} schema\n * @param {any} state\n * @param {Y.XmlFragment} [xmlFragment] If supplied, an xml fragment to be\n *   populated from the prosemirror state; otherwise a new XmlFragment will be created.\n * @return {Y.XmlFragment}\n */\nexport function prosemirrorJSONToYXmlFragment(schema, state, xmlFragment) {\n    const doc = Node.fromJSON(schema, state)\n    return prosemirrorToYXmlFragment(doc, xmlFragment)\n}\n\n/**\n * @deprecated Use `yXmlFragmentToProseMirrorRootNode` instead\n *\n * Utility method to convert a Y.Doc to a Prosemirror Doc node.\n *\n * @param {Schema} schema\n * @param {Y.Doc} ydoc\n * @return {Node}\n */\nexport function yDocToProsemirror(schema, ydoc) {\n    const state = yDocToProsemirrorJSON(ydoc)\n    return Node.fromJSON(schema, state)\n}\n\n/**\n *\n * @deprecated Use `yXmlFragmentToProseMirrorRootNode` instead\n *\n * Utility method to convert a Y.XmlFragment to a Prosemirror Doc node.\n *\n * @param {Schema} schema\n * @param {Y.XmlFragment} xmlFragment\n * @return {Node}\n */\nexport function yXmlFragmentToProsemirror(schema, xmlFragment) {\n    const state = yXmlFragmentToProsemirrorJSON(xmlFragment)\n    return Node.fromJSON(schema, state)\n}\n\n/**\n *\n * @deprecated Use `yXmlFragmentToProseMirrorRootNode` instead\n *\n * Utility method to convert a Y.Doc to Prosemirror compatible JSON.\n *\n * @param {Y.Doc} ydoc\n * @param {string} xmlFragment\n * @return {Record<string, any>}\n */\nexport function yDocToProsemirrorJSON(ydoc, xmlFragment = 'prosemirror') {\n    return yXmlFragmentToProsemirrorJSON(ydoc.getXmlFragment(xmlFragment))\n}\n\n/**\n * @deprecated Use `yXmlFragmentToProseMirrorRootNode` instead\n *\n * Utility method to convert a Y.Doc to Prosemirror compatible JSON.\n *\n * @param {Y.XmlFragment} xmlFragment The fragment, which must be part of a Y.Doc.\n * @return {Record<string, any>}\n */\nexport function yXmlFragmentToProsemirrorJSON(xmlFragment) {\n    const items = xmlFragment.toArray()\n\n    /**\n     * @param {Y.AbstractType} item\n     */\n    const serialize = item => {\n        /**\n         * @type {Object} NodeObject\n         * @property {string} NodeObject.type\n         * @property {Record<string, string>=} NodeObject.attrs\n         * @property {Array<NodeObject>=} NodeObject.content\n         */\n        let response\n\n        // TODO: Must be a better way to detect text nodes than this\n        if (item instanceof Y.XmlText) {\n            const delta = item.toDelta()\n            response = delta.map(/** @param {any} d */(d) => {\n                const text = {\n                    type: 'text', text: d.insert\n                }\n                if (d.attributes) {\n                    text.marks = Object.keys(d.attributes).map((type_) => {\n                        const attrs = d.attributes[type_]\n                        const type = yattr2markname(type_)\n                        const mark = {\n                            type\n                        }\n                        if (Object.keys(attrs)) {\n                            mark.attrs = attrs\n                        }\n                        return mark\n                    })\n                }\n                return text\n            })\n        } else if (item instanceof Y.XmlElement) {\n            response = {\n                type: item.nodeName\n            }\n\n            const attrs = item.getAttributes()\n            if (Object.keys(attrs).length) {\n                response.attrs = attrs\n            }\n\n            const children = item.toArray()\n            if (children.length) {\n                response.content = children.map(serialize).flat()\n            }\n        } else {\n            // expected either Y.XmlElement or Y.XmlText\n            error.unexpectedCase()\n        }\n\n        return response\n    }\n\n    return {\n        type: 'doc', content: items.map(serialize)\n    }\n}","import * as Y from 'yjs'\nimport { Decoration, DecorationSet } from \"prosemirror-view\"; // eslint-disable-line\nimport { Plugin } from \"prosemirror-state\"; // eslint-disable-line\nimport { Awareness } from \"y-protocols/awareness\"; // eslint-disable-line\nimport {\n  absolutePositionToRelativePosition,\n  relativePositionToAbsolutePosition,\n  setMeta\n} from '../lib.js'\nimport { yCursorPluginKey, ySyncPluginKey } from './keys.js'\n\nimport * as math from 'lib0/math'\n\n/**\n * Default awareness state filter\n *\n * @param {number} currentClientId current client id\n * @param {number} userClientId user client id\n * @param {any} _user user data\n * @return {boolean}\n */\nexport const defaultAwarenessStateFilter = (currentClientId, userClientId, _user) => currentClientId !== userClientId\n\n/**\n * Default generator for a cursor element\n *\n * @param {any} user user data\n * @return {HTMLElement}\n */\nexport const defaultCursorBuilder = (user) => {\n  const cursor = document.createElement('span')\n  cursor.classList.add('ProseMirror-yjs-cursor')\n  cursor.setAttribute('style', `border-color: ${user.color}`)\n  const userDiv = document.createElement('div')\n  userDiv.setAttribute('style', `background-color: ${user.color}`)\n  userDiv.insertBefore(document.createTextNode(user.name), null)\n  const nonbreakingSpace1 = document.createTextNode('\\u2060')\n  const nonbreakingSpace2 = document.createTextNode('\\u2060')\n  cursor.insertBefore(nonbreakingSpace1, null)\n  cursor.insertBefore(userDiv, null)\n  cursor.insertBefore(nonbreakingSpace2, null)\n  return cursor\n}\n\n/**\n * Default generator for the selection attributes\n *\n * @param {any} user user data\n * @return {import('prosemirror-view').DecorationAttrs}\n */\nexport const defaultSelectionBuilder = (user) => {\n  return {\n    style: `background-color: ${user.color}70`,\n    class: 'ProseMirror-yjs-selection'\n  }\n}\n\nconst rxValidColor = /^#[0-9a-fA-F]{6}$/\n\n/**\n * @param {any} state\n * @param {Awareness} awareness\n * @param {function(number, number, any):boolean} awarenessFilter\n * @param {(user: { name: string, color: string }, clientId: number) => Element} createCursor\n * @param {(user: { name: string, color: string }, clientId: number) => import('prosemirror-view').DecorationAttrs} createSelection\n * @return {any} DecorationSet\n */\nexport const createDecorations = (\n  state,\n  awareness,\n  awarenessFilter,\n  createCursor,\n  createSelection\n) => {\n  const ystate = ySyncPluginKey.getState(state)\n  const y = ystate.doc\n  const decorations = []\n  if (\n    ystate.snapshot != null || ystate.prevSnapshot != null ||\n    ystate.binding.mapping.size === 0\n  ) {\n    // do not render cursors while snapshot is active\n    return DecorationSet.create(state.doc, [])\n  }\n  awareness.getStates().forEach((aw, clientId) => {\n    if (!awarenessFilter(y.clientID, clientId, aw)) {\n      return\n    }\n\n    if (aw.cursor != null) {\n      const user = aw.user || {}\n      if (user.color == null) {\n        user.color = '#ffa500'\n      } else if (!rxValidColor.test(user.color)) {\n        // We only support 6-digit RGB colors in y-prosemirror\n        console.warn('A user uses an unsupported color format', user)\n      }\n      if (user.name == null) {\n        user.name = `User: ${clientId}`\n      }\n      let anchor = relativePositionToAbsolutePosition(\n        y,\n        ystate.type,\n        Y.createRelativePositionFromJSON(aw.cursor.anchor),\n        ystate.binding.mapping\n      )\n      let head = relativePositionToAbsolutePosition(\n        y,\n        ystate.type,\n        Y.createRelativePositionFromJSON(aw.cursor.head),\n        ystate.binding.mapping\n      )\n      if (anchor !== null && head !== null) {\n        const maxsize = math.max(state.doc.content.size - 1, 0)\n        anchor = math.min(anchor, maxsize)\n        head = math.min(head, maxsize)\n        decorations.push(\n          Decoration.widget(head, () => createCursor(user, clientId), {\n            key: clientId + '',\n            side: 10\n          })\n        )\n        const from = math.min(anchor, head)\n        const to = math.max(anchor, head)\n        decorations.push(\n          Decoration.inline(from, to, createSelection(user, clientId), {\n            inclusiveEnd: true,\n            inclusiveStart: false\n          })\n        )\n      }\n    }\n  })\n  return DecorationSet.create(state.doc, decorations)\n}\n\n/**\n * A prosemirror plugin that listens to awareness information on Yjs.\n * This requires that a `prosemirrorPlugin` is also bound to the prosemirror.\n *\n * @public\n * @param {Awareness} awareness\n * @param {object} opts\n * @param {function(any, any, any):boolean} [opts.awarenessStateFilter]\n * @param {(user: any, clientId: number) => HTMLElement} [opts.cursorBuilder]\n * @param {(user: any, clientId: number) => import('prosemirror-view').DecorationAttrs} [opts.selectionBuilder]\n * @param {function(any):any} [opts.getSelection]\n * @param {string} [cursorStateField] By default all editor bindings use the awareness 'cursor' field to propagate cursor information.\n * @return {any}\n */\nexport const yCursorPlugin = (\n  awareness,\n  {\n    awarenessStateFilter = defaultAwarenessStateFilter,\n    cursorBuilder = defaultCursorBuilder,\n    selectionBuilder = defaultSelectionBuilder,\n    getSelection = (state) => state.selection\n  } = {},\n  cursorStateField = 'cursor'\n) =>\n  new Plugin({\n    key: yCursorPluginKey,\n    state: {\n      init (_, state) {\n        return createDecorations(\n          state,\n          awareness,\n          awarenessStateFilter,\n          cursorBuilder,\n          selectionBuilder\n        )\n      },\n      apply (tr, prevState, _oldState, newState) {\n        const ystate = ySyncPluginKey.getState(newState)\n        const yCursorState = tr.getMeta(yCursorPluginKey)\n        if (\n          (ystate && ystate.isChangeOrigin) ||\n          (yCursorState && yCursorState.awarenessUpdated)\n        ) {\n          return createDecorations(\n            newState,\n            awareness,\n            awarenessStateFilter,\n            cursorBuilder,\n            selectionBuilder\n          )\n        }\n        return prevState.map(tr.mapping, tr.doc)\n      }\n    },\n    props: {\n      decorations: (state) => {\n        return yCursorPluginKey.getState(state)\n      }\n    },\n    view: (view) => {\n      const awarenessListener = () => {\n        // @ts-ignore\n        if (view.docView) {\n          setMeta(view, yCursorPluginKey, { awarenessUpdated: true })\n        }\n      }\n      const updateCursorInfo = () => {\n        const ystate = ySyncPluginKey.getState(view.state)\n        // @note We make implicit checks when checking for the cursor property\n        const current = awareness.getLocalState() || {}\n        if (view.hasFocus()) {\n          const selection = getSelection(view.state)\n          /**\n           * @type {Y.RelativePosition}\n           */\n          const anchor = absolutePositionToRelativePosition(\n            selection.anchor,\n            ystate.type,\n            ystate.binding.mapping\n          )\n          /**\n           * @type {Y.RelativePosition}\n           */\n          const head = absolutePositionToRelativePosition(\n            selection.head,\n            ystate.type,\n            ystate.binding.mapping\n          )\n          if (\n            current.cursor == null ||\n            !Y.compareRelativePositions(\n              Y.createRelativePositionFromJSON(current.cursor.anchor),\n              anchor\n            ) ||\n            !Y.compareRelativePositions(\n              Y.createRelativePositionFromJSON(current.cursor.head),\n              head\n            )\n          ) {\n            awareness.setLocalStateField(cursorStateField, {\n              anchor,\n              head\n            })\n          }\n        } else if (\n          current.cursor != null &&\n          relativePositionToAbsolutePosition(\n            ystate.doc,\n            ystate.type,\n            Y.createRelativePositionFromJSON(current.cursor.anchor),\n            ystate.binding.mapping\n          ) !== null\n        ) {\n          // delete cursor information if current cursor information is owned by this editor binding\n          awareness.setLocalStateField(cursorStateField, null)\n        }\n      }\n      awareness.on('change', awarenessListener)\n      view.dom.addEventListener('focusin', updateCursorInfo)\n      view.dom.addEventListener('focusout', updateCursorInfo)\n      return {\n        update: updateCursorInfo,\n        destroy: () => {\n          view.dom.removeEventListener('focusin', updateCursorInfo)\n          view.dom.removeEventListener('focusout', updateCursorInfo)\n          awareness.off('change', awarenessListener)\n          awareness.setLocalStateField(cursorStateField, null)\n        }\n      }\n    }\n  })\n","import { Plugin } from 'prosemirror-state' // eslint-disable-line\n\nimport { getRelativeSelection } from './sync-plugin.js'\nimport { UndoManager, Item, ContentType, XmlElement, Text } from 'yjs'\nimport { yUndoPluginKey, ySyncPluginKey } from './keys.js'\n\nexport const undo = state => {\n  const undoManager = yUndoPluginKey.getState(state).undoManager\n  if (undoManager != null) {\n    undoManager.undo()\n    return true\n  }\n}\n\nexport const redo = state => {\n  const undoManager = yUndoPluginKey.getState(state).undoManager\n  if (undoManager != null) {\n    undoManager.redo()\n    return true\n  }\n}\n\nexport const defaultProtectedNodes = new Set(['paragraph'])\n\nexport const defaultDeleteFilter = (item, protectedNodes) => !(item instanceof Item) ||\n!(item.content instanceof ContentType) ||\n!(item.content.type instanceof Text ||\n  (item.content.type instanceof XmlElement && protectedNodes.has(item.content.type.nodeName))) ||\nitem.content.type._length === 0\n\nexport const yUndoPlugin = ({ protectedNodes = defaultProtectedNodes, trackedOrigins = [], undoManager = null } = {}) => new Plugin({\n  key: yUndoPluginKey,\n  state: {\n    init: (initargs, state) => {\n      // TODO: check if plugin order matches and fix\n      const ystate = ySyncPluginKey.getState(state)\n      const _undoManager = undoManager || new UndoManager(ystate.type, {\n        trackedOrigins: new Set([ySyncPluginKey].concat(trackedOrigins)),\n        deleteFilter: (item) => defaultDeleteFilter(item, protectedNodes),\n        captureTransaction: tr => tr.meta.get('addToHistory') !== false\n      })\n      return {\n        undoManager: _undoManager,\n        prevSel: null,\n        hasUndoOps: _undoManager.undoStack.length > 0,\n        hasRedoOps: _undoManager.redoStack.length > 0\n      }\n    },\n    /**\n     * @returns {any}\n     */\n    apply: (tr, val, oldState, state) => {\n      const binding = ySyncPluginKey.getState(state).binding\n      const undoManager = val.undoManager\n      const hasUndoOps = undoManager.undoStack.length > 0\n      const hasRedoOps = undoManager.redoStack.length > 0\n      if (binding) {\n        return {\n          undoManager,\n          prevSel: getRelativeSelection(binding, oldState),\n          hasUndoOps,\n          hasRedoOps\n        }\n      } else {\n        if (hasUndoOps !== val.hasUndoOps || hasRedoOps !== val.hasRedoOps) {\n          return Object.assign({}, val, {\n            hasUndoOps: undoManager.undoStack.length > 0,\n            hasRedoOps: undoManager.redoStack.length > 0\n          })\n        } else { // nothing changed\n          return val\n        }\n      }\n    }\n  },\n  view: view => {\n    const ystate = ySyncPluginKey.getState(view.state)\n    const undoManager = yUndoPluginKey.getState(view.state).undoManager\n    undoManager.on('stack-item-added', ({ stackItem }) => {\n      const binding = ystate.binding\n      if (binding) {\n        stackItem.meta.set(binding, yUndoPluginKey.getState(view.state).prevSel)\n      }\n    })\n    undoManager.on('stack-item-popped', ({ stackItem }) => {\n      const binding = ystate.binding\n      if (binding) {\n        binding.beforeTransactionSelection = stackItem.meta.get(binding) || binding.beforeTransactionSelection\n      }\n    })\n    return {\n      destroy: () => {\n        undoManager.destroy()\n      }\n    }\n  }\n})\n"],"names":["PluginKey","buf","sha256","Y","set","random","Plugin","eventloop","AllSelection","TextSelection","NodeSelection","createMutex","environment","dom","PModel","math","error","object","simpleDiff","map","utils.hashOfJSON","Fragment","Node","DecorationSet","Decoration","Item","ContentType","Text","XmlElement","UndoManager"],"mappings":"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"}